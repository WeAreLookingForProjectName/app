<% content_for(:meta_title, "#{@user.username}: #{t("posts")}") %>

<% content_for(:second_top_menu) do %>
  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= ThingsTypes.new(params[:type]).i18n %>
    </a>

    <div class="dropdown-menu">
      <%= link_to(t("posts_and_comments"), user_path(@user, type: :all), class: 'dropdown-item') %>
      <%= link_to(t("posts"), user_path(@user, type: :post), class: 'dropdown-item') %>
      <%= link_to(t("comments"), user_path(@user, type: :comment), class: 'dropdown-item') %>

      <% if current_user.id == @user.id %>
        <%= link_to(t("notifications"), notifications_path, class: 'dropdown-item') %>
        <%= link_to(t("bookmarks"), bookmarks_path, class: 'dropdown-item') %>
        <%= link_to(t("votes"), votes_path, class: 'dropdown-item') %>
      <% end %>
    </div>
  </li>

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= ThingsSorting.new(params[:sort]).i18n %>
    </a>

    <div class="dropdown-menu">
      <% ThingsSorting.new.list.each do |k, v| %>
        <%= link_to(v, user_path(@user, type: params[:type], sort: k), class: 'dropdown-item') %>
      <% end %>
    </div>
  </li>

  <li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= ThingsDates.new(params[:date]).i18n %>
    </a>

    <div class="dropdown-menu">
      <% ThingsDates.new.list.each do |k, v| %>
        <%= link_to(v, user_path(@user, sort: params[:sort], date: k, type: params[:type]), class: 'dropdown-item') %>
      <% end %>
    </div>
  </li>
<% end %>

<%= render "users/sidebar" %>
<%= render partial: "things/thing", collection: @records, cached: true %>
<%= render 'shared/pagination', pagination_record: @pagination_record %>