<%
  # We need this because post partial renders not only in own community context, but in many different contexts
  post_context = ::Context.new(current_user, post.community)
%>

<%= render 'shared/modal', title: t('.title') do %>
  <%= simple_form_for(@form, url: post_path(post), method: :delete, remote: true) do |f| %>
    <% if PostPolicy.new(post_context, post).update_removed_reason? %>
      <%= f.input :reason, as: :text %>
    <% else %>
      <%= t('posts.remove.confirmation') %>
    <% end %>

    <%= f.button :submit, t('posts.remove.submit') %>
  <% end %>
<% end %>