<%= render 'shared/modal', title: t('report') do %>
  <%= form_with(model: @form, url: thing_report_create_path(@thing.sub, @thing), class: 'reportForm') do |f| %>
    <div class="modal-body">
      <% if @thing.sub.rules.present? %>
        <div class="reportOptionsList pt-2" data-toggle="collapse" data-target="#sub-reasons" aria-expanded="false">
          <span>
            <%= t('rules_violation') %>
          </span>

          <span class="float-right">
            <%= fa_icon('chevron-down') %>
          </span>
        </div>

        <div class="pt-2 collapse" id="sub-reasons">
          <% @thing.sub.rules.each_with_index do |rule, index| %>
            <div class="custom-control custom-radio">
              <input id="sub-rule-<%= index %>" type="radio" value="<%= rule.title %>" class="report-rule custom-control-input">
              <label class="custom-control-label" for="sub-rule-<%= index %>"><%= rule.title %></label>
            </div>
          <% end %>
        </div>
      <% end %>

      <div class="reportOptionsList pt-2" data-toggle="collapse" data-target="#other-reasons" aria-expanded="false">
        <span>
          <%= t('other_violation') %>
        </span>

        <span class="float-right">
          <%= fa_icon('chevron-down') %>
        </span>
      </div>

      <div class="pt-2 collapse" id="other-reasons">
        <% DeletionReason.global.all.each_with_index do |deletion_reason, index| %>
          <div class="custom-control custom-radio">
            <input id="other-rule-<%= index %>" type="radio" value="<%= deletion_reason.title %>" class="report-rule custom-control-input">
            <label class="custom-control-label" for="other-rule-<%= index %>"><%= deletion_reason.title %></label>
          </div>
        <% end %>
      </div>

      <div class="reportOptionsList pt-2" data-toggle="collapse" data-target="#custom-reason" aria-expanded="false">
        <span>
          <%= t('custom_report') %>
        </span>

        <span class="float-right">
          <%= fa_icon('chevron-down') %>
        </span>
      </div>

      <div class="pt-2 collapse" id="custom-reason">
        <%= f.text_area :text %>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-primary" data-dismiss="modal"><%= t('cancel') %></button>
      <%= f.submit t('report') %>
    </div>
  <% end %>
<% end %>