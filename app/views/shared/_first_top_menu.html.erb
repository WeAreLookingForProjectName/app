<div class="container-fluid bg-white border-bottom p-0">
  <div class="container p-0">
    <div class="row">
      <div class="col-12">
        <nav class="first-top-menu navbar navbar-expand">
          <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                <select id="navigation" class="selectpicker" data-live-search="true" data-size="10" title="<%= t("app_name") %>">
                  <option data-href="<%= root_path %>"><%= t("home")%></option>

                  <% if user_signed_in? %>
                    <option data-href="<%= notifications_path %>"><%= t("notifications")%></option>
                    <option data-href="<%= edit_users_path %>"><%= t("settings") %></option>

                    <% navigation = UserNavigation.new(current_user) %>

                    <% if navigation.moderation.present? %>
                      <optgroup label="<%= t("mod_queue") %>">
                        <option data-href="<%= mod_queues_path %>"><%= t("mod_queue") %></option>
                          <% navigation.moderation.each do |sub| %>
                            <option data-href="<%= sub_path(sub) %>"><%= sub.title %></option>
                          <% end %>
                      </optgroup>
                    <% end %>

                    <% if navigation.follows.present? %>
                      <optgroup label="<%= t("follows") %>">
                        <% navigation.follows.each do |sub| %>
                          <option data-href="<%= sub_path(sub) %>"><%= sub.title %></option>
                        <% end %>
                      </optgroup>
                    <% end %>
                  <% end %>
                </select>
              </li>
            </ul>
            <ul class="navbar-nav">
              <% if user_signed_in? %>
                <li class="user-signed-in nav-item">
                  <% if current_user.notifications_count.zero? %>
                    <%= link_to(fa_icon('bell-o'), notifications_path, class: 'nav-link') %>
                  <% else %>
                    <%= link_to(fa_icon('bell', text: current_user.notifications_count), notifications_path, class: 'nav-link text-danger') %>
                  <% end %>
                </li>

                <li class="nav-item dropdown ml-2">
                  <span class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <%= current_user.username %>
                  </span>

                  <div class="dropdown-menu">
                    <%= link_to(t('profile'), user_path(current_user), class: 'dropdown-item') %>
                    <%= link_to(t('settings'), edit_users_path, class: 'dropdown-item') %>
                    <div class="dropdown-divider"></div>
                    <%= link_to(t('sign_out'), sign_out_path, method: :delete, class: 'dropdown-item') %>
                  </div>
                </li>
              <% else %>
                <li class="nav-item ml-2">
                  <%= link_to(t('sign_in'), new_sign_in_path, remote: true, class: 'signIn') %>
                </li>
              <% end %>
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>
</div>
