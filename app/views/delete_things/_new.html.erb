<%= render 'shared/modal', title: t('delete') do %>
  <%= form_with(model: @form, url: thing_delete_path(@thing), class: 'deleteForm') do |f| %>
    <div class="modal-body">
      <% if current_user.global_moderator? || current_user.sub_moderator?(@sub) %>
        <div class="form-group">
          <select class="removalReasons form-control">
            <option value=""><% t('deletion_reason_select') %></option>

            <% DeletionReason.global.or(DeletionReason.where(sub: @sub)).all.each do |deletion_reason| %>
              <option value="<%= deletion_reason.description %>"><%= deletion_reason.title %></option>
            <% end %>
          </select>
        </div>

        <%= f.text_area :deletion_reason %>
      <% else %>
        <%= t('deletion_confirmation') %>
      <% end %>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-primary" data-dismiss="modal"><%= t('cancel') %></button>
      <%= f.submit t('delete') %>
    </div>
  <% end %>
<% end %>