<% content_for(:meta_title, t("pages")) %>

<%= render 'subs/second_top_menu' %>
<%= render 'subs/sidebar' %>

<div id="pages" class="entries row">
  <div class="head col-12">
    <div class="title">
      <%= link_to(t('pages'), sub_pages_path(@sub)) %>
    </div>

    <% if SubPagePolicy.new(current_user, @sub).create? %>
      <div class="actions">
        <%= link_to(t('create'), new_sub_page_path(@sub), class: 'create') %>
      </div>
    <% end %>
  </div>

  <div class="col-12">
    <div class="body col-12">
      <% cache_variant = SubPagePolicy.new(current_user, @sub).update? %>
      <%= render partial: "page", collection: @records, cached: ->(page) { [page, cache_variant] } %>
    </div>
  </div>
</div>

<%= render 'shared/pagination', after: @after_record %>